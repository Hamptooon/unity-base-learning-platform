-   Доделать систему жалоб
    -   Отображение жалоб у админа (для жалоб на ревью отображается информация о жалобе: дата жалобы, тип жалобы, описание жалобы, количество ранее одобренных жалоб на пользователя, имя пользователя на котрого подана жалоба, его почта)
    -   Возможность принять жалобу на ревью -> ревью удаляется, оценка формируется из оставшихся ревью, если было только одно ревью то отображается в разделе ревью, что работа еще не была проверена
    -   Число жалоб на пользователя при принятии жалоб увеличивается на 1
    -   При отклонении жалобы жалоба удаляется из бд
    -   в админке есть возможность просмотреть пользователей, где у них отображается роль, количество жалоб, имя, почта, ссылка на профиль на сайте
-   в профиле должны отображаться все ревью пользователя
-   также доделать чтобы в профиле отображались последние решения и все решения

-   сделать так чтобы пользователь мог создавать свои приватные курсы, статьи и челленджи, у каждого материала должна быть ссылка для доступа, при переходе по ссылке у пользователя есть возможность записаться на курс, только записанные на курс пользователи могут участвовать в перекрестной проверке заданий данного курса

-   список курсов, статей и заданий пользователя отображаются на главной странице пользователя

-   сделать отображение списка статей

-   сделать отображение списка челленджей

-   добавить возможность добавления тегов к статьям, челленджам и курсам и сортировки по ним (опционально, мб замокать)

-   сделать функциональный дэшбоард для админа сайта и пользователя, чтобы он мог видеть статистику своих приватных курсов (мб замокать)

-   добавить страницу уведомлений о действиях, ответы на жалобы, ревью проектов, выход нового курса, жалоба на вас, оценка вашего ревью (мб замокать)
-   оформить страницу настроек профиля

-   привести все +- к одному дизайну

-   переписать 2 главу и часть первой главы диплома, добавив упоминания новых функций, а также дополнииельныен диаграммы (вариантов использования, и тд (смотреть в примерах диплома)), во вторйо главе также описать архитектуру FSD, Clean Architecture

-   Во второй главе добавить прототипы экранов приложения чтобы они сходились с текущей реализацией

**Статья 1: Настройка проекта и создание персонажа**  
**Описание:**  
Подробное руководство по созданию 2D-проекта в Unity, импорту ассетов, настройке физики персонажа и анимаций.

---

# Настройка проекта и создание персонажа

## Введение

В этой статье вы подготовите основу для 2D-платформера: создадите проект, импортируете ассеты, настроите управление персонажем и его анимации.

---

## Шаг 1: Создание проекта в Unity

1. **Запустите Unity Hub** и нажмите **New Project**.
2. Выберите шаблон **2D Core** (для Unity 2021 и выше) или **2D Template** (для более старых версий).
3. Укажите имя проекта, например, `Platformer`, и путь для сохранения.
4. Дождитесь завершения создания проекта.

**Совет:**  
Убедитесь, что в **Package Manager** (Window → Package Manager) установлены:

-   **2D Tilemap Editor** (для построения уровней).
-   **Cinemachine** (для умной камеры).
-   **Input System** (если используете новую систему ввода).

---

## Шаг 2: Импорт ассетов

### 2.1. Загрузка спрайтов

-   Рекомендуемые ресурсы:
    -   [OpenGameArt](https://opengameart.org/) (бесплатные спрайты).
    -   [Kenney.nl](https://kenney.nl/) (готовые ассеты для платформеров).
-   Скачайте пакет, содержащий:
    -   Спрайты персонажа (idle, run, jump).
    -   Тайлы для платформ и фона.

### 2.2. Импорт в Unity

1. Перетащите папку с ассетами в окно **Project** (обычно в папку `Assets/Art`).
2. Настройте **Texture Type** для спрайтов:
    - Выберите спрайт персонажа → в Inspector установите:
        - Texture Type: **Sprite (2D and UI)**.
        - Pixels Per Unit: `32` (зависит от размера спрайта).
        - Filter Mode: **Point (no filter)** (чтобы избежать размытости).

---

## Шаг 3: Настройка персонажа

### 3.1. Создание объекта Player

1. В Hierarchy нажмите **Create Empty** и назовите объект `Player`.
2. Перетащите спрайт персонажа (например, `idle_1`) на объект `Player`.

### 3.2. Добавление компонентов

-   **Rigidbody2D**:
    -   Mass: `1`.
    -   Gravity Scale: `4` (реалистичная гравитация).
    -   Freeze Rotation Z: включено (чтобы персонаж не падал).
-   **BoxCollider2D**:
    -   Нажмите **Edit Collider** и подгоните размер под спрайт.

![Настройка коллайдера](https://example.com/collider-setup.png) _Пример настройки BoxCollider2D._

### 3.3. Скрипт движения

1. Создайте папку `Scripts` в Project.
2. Создайте скрипт `PlayerMovement` и откройте его в редакторе кода.

```csharp
using UnityEngine;

public class PlayerMovement : MonoBehaviour
{
    [SerializeField] private float speed = 8f;
    [SerializeField] private float jumpForce = 12f;
    [SerializeField] private LayerMask groundLayer;

    private Rigidbody2D rb;
    private bool isGrounded;
    private float raycastLength = 0.1f;

    void Start()
    {
        rb = GetComponent<Rigidbody2D>();
    }

    void Update()
    {
        // Проверка земли через Raycast
        RaycastHit2D hit = Physics2D.Raycast(transform.position, Vector2.down, raycastLength, groundLayer);
        isGrounded = hit.collider != null;

        // Движение влево/вправо
        float moveX = Input.GetAxis("Horizontal");
        rb.velocity = new Vector2(moveX * speed, rb.velocity.y);

        // Прыжок
        if (Input.GetButtonDown("Jump") && isGrounded)
        {
            rb.AddForce(Vector2.up * jumpForce, ForceMode2D.Impulse);
        }
    }

    // Визуализация Raycast в редакторе
    void OnDrawGizmos()
    {
        Gizmos.color = Color.red;
        Gizmos.DrawLine(transform.position, transform.position + Vector3.down * raycastLength);
    }
}
```

**Пояснение к коду:**

-   `Raycast` используется для более точной проверки нахождения на земле (вместо `OnCollisionEnter`).
-   `groundLayer` позволяет игнорировать коллизии с другими объектами (например, врагами).

### 3.4. Настройка слоев

1. Перейдите в **Edit → Project Settings → Tags and Layers**.
2. Создайте слой `Ground`.
3. Назначьте этот слой всем объектам, которые являются землей (платформы, пол).

---

## Шаг 4: Анимация персонажа

### 4.1. Подготовка анимаций

1. Создайте папку `Animations/Player`.
2. Выделите все спрайты для анимации idle (например, `idle_1`, `idle_2`).
3. Перетащите их в окно **Animation** (Window → Animation → Animation).
4. Нажмите **Create** и сохраните анимацию как `Player_Idle.anim`.

Повторите для анимации бега (`Player_Run.anim`).

### 4.2. Настройка Animator

1. Перейдите в папку `Animations/Player` и создайте **Animator Controller** `Player_AC`.
2. Дважды щелкните на контроллере, чтобы открыть окно **Animator**.
3. Создайте переходы между состояниями:
    - `Idle → Run`: условие `Speed > 0.1`.
    - `Run → Idle`: условие `Speed < 0.1`.

![Animator transitions](https://example.com/animator-setup.png) _Пример переходов между анимациями._

### 4.3. Привязка анимаций к коду

Добавьте в скрипт `PlayerMovement`:

```csharp
private Animator animator;

void Start()
{
    rb = GetComponent<Rigidbody2D>();
    animator = GetComponent<Animator>();
}

void Update()
{
    // ... предыдущий код ...
    animator.SetFloat("Speed", Mathf.Abs(moveX));
}
```

---

## Шаг 5: Тестирование

1. Создайте платформу:
    - Добавьте объект с **SpriteRenderer** и **BoxCollider2D**.
    - Назначьте слой `Ground`.
2. Нажмите **Play** и проверьте:
    - Движение влево/вправо.
    - Прыжок только при касании земли.
    - Переключение анимаций idle/run.

**Возможные ошибки:**

-   Персонаж проваливается сквозь платформу: убедитесь, что у платформы есть коллайдер и слой `Ground`.
-   Анимации не работают: проверьте параметры в Animator и названия анимационных клипов.

---

## Заключение

Вы настроили базовое движение и анимации для персонажа. В следующей статье мы добавим уровень, камеру и параллакс-фон. Для практики попробуйте:

-   Реализовать двойной прыжок.
-   Добавить звуки прыжка и шагов.

```

---

### Примечания для ученика:
- Код использует **новую систему ввода** Unity. Если вы используете старую (Input Manager), замените `Input.GetButtonDown("Jump")` на `Input.GetKeyDown(KeyCode.Space)`.
- Для двойного прыжка добавьте переменную `private int jumpCount` и условие `if (jumpCount < 2)`.
```

---

---

---

---

---

### Практическое задание: Создание многоуровневого 2D-платформера

**Описание:**  
Разработайте игру-платформер с двумя уровнями, системой сохранения прогресса, сбором предметов и базовым UI. Игра должна включать управляемого персонажа, препятствия, врагов, меню паузы и переход между уровнями.

---

### Что должно быть в итоге:

1. **Управляемый персонаж:**

    - Перемещение влево/вправо с анимациями (idle, run).
    - Прыжок и двойной прыжок.
    - Возможность атаковать врагов (например, прыжком на них).
    - Система здоровья (3 жизни) с визуальным отображением.

2. **Уровни:**

    - **Уровень 1:**
        - Платформы с препятствиями (шипы, движущиеся платформы).
        - 3 врага с патрулированием.
        - 10 монет для сбора.
    - **Уровень 2:**
        - Босс с простым ИИ (преследует игрока, наносит урон).
        - Таймер (игрок должен победить босса за 60 секунд).
        - Секретная зона с бонусной жизнью.
    - Переход между уровнями через триггер (например, дверь).

3. **Система сохранения:**

    - Сохранение количества монет и текущего уровня при выходе из игры.
    - Загрузка прогресса при запуске.

4. **UI:**

    - Главное меню: кнопки «Новая игра», «Продолжить», «Выход».
    - Игровой UI:
        - Счетчик монет.
        - Таймер (для уровня 2).
        - Иконки жизней.
    - Меню паузы (при нажатии Esc).

5. **Оптимизация:**
    - Настройка слоев сортировки (фон, платформы, персонаж).
    - Использование пулов объектов для монет и врагов.

---

### Пошаговое описание задания:

#### 1. Настройка проекта:

-   Создайте новый 2D-проект в Unity.
-   Импортируйте ассеты: спрайты персонажа, врагов, монет, фоны, тайлы для платформ.
-   Настройте **Input System** для управления.

#### 2. Персонаж:

-   Добавьте компоненты:
    -   `Rigidbody2D` + `CapsuleCollider2D`.
    -   Анимации для idle, run, jump и атаки.
-   Реализуйте скрипт `PlayerController`:

    ```csharp
    public class PlayerController : MonoBehaviour
    {
        [SerializeField] private float speed = 8f;
        [SerializeField] private float jumpForce = 12f;
        [SerializeField] private int maxHealth = 3;
        private int currentHealth;
        private int coins;

        void Start() => currentHealth = maxHealth;

        void Update()
        {
            // Движение и прыжок
            float moveX = Input.GetAxis("Horizontal");
            if (Input.GetButtonDown("Jump") && IsGrounded())
                Jump();

            // Атака (пример: прыжок на врага)
            if (Input.GetKeyDown(KeyCode.E))
                Attack();
        }

        void OnTriggerEnter2D(Collider2D other)
        {
            if (other.CompareTag("Coin"))
            {
                coins++;
                Destroy(other.gameObject);
            }
        }

        public void TakeDamage(int damage)
        {
            currentHealth -= damage;
            if (currentHealth <= 0) GameOver();
        }
    }
    ```

#### 3. Уровни:

-   **Уровень 1:**
    -   Используйте **Tilemap** для построения платформ.
    -   Добавьте врагов с патрулированием (скрипт из предыдущих статей).
    -   Разместите монеты и шипы (триггеры урона).
-   **Уровень 2:**

    -   Создайте босса с ИИ:

        ```csharp
        public class BossAI : MonoBehaviour
        {
            [SerializeField] private float chaseSpeed = 4f;
            private Transform player;

            void Start() => player = GameObject.FindGameObjectWithTag("Player").transform;

            void Update()
            {
                // Преследование игрока
                transform.position = Vector2.MoveTowards(transform.position, player.position, chaseSpeed * Time.deltaTime);
            }
        }
        ```

    -   Добавьте триггер для перехода на уровень 1 после победы над боссом.

#### 4. Сохранение прогресса:

-   Используйте `PlayerPrefs` для сохранения данных:

    ```csharp
    void SaveProgress()
    {
        PlayerPrefs.SetInt("Coins", coins);
        PlayerPrefs.SetInt("CurrentLevel", currentLevel);
    }

    void LoadProgress()
    {
        coins = PlayerPrefs.GetInt("Coins", 0);
        currentLevel = PlayerPrefs.GetInt("CurrentLevel", 1);
    }
    ```

#### 5. UI:

-   Главное меню:
    -   Кнопка «Продолжить» активна только при наличии сохранения.
-   Игровой UI:
    -   Используйте **TextMeshPro** для счетчика монет и таймера.
    -   Иконки жизней: массив `Image[] healthIcons`, где каждая иконка скрывается при потере жизни.

#### 6. Тестирование и оптимизация:

-   Проверьте коллизии, переходы между уровнями и сохранение.
-   Убедитесь, что враги и монеты не вызывают лагов (используйте пулы объектов).

---

### Критерии оценки:

1. **Персонаж (20 баллов):**

    - Плавное движение и прыжки.
    - Корректная анимация состояний.
    - Рабочая система здоровья.

2. **Уровни (30 баллов):**

    - Уровень 1: враги патрулируют, монеты собираются.
    - Уровень 2: босс преследует игрока, есть таймер.
    - Переход между уровнями через триггер.

3. **UI и сохранение (25 баллов):**

    - Главное меню с кнопками.
    - Игровой UI отображает актуальные данные.
    - Прогресс сохраняется и загружается.

4. **Оптимизация (15 баллов):**

    - Нет фризов и лагов.
    - Использование пулов для объектов.

5. **Креативность (10 баллов):**
    - Добавление уникальных механик (например, секретная зона).

---

### Советы:

-   Для босса добавьте анимацию атаки и звуковые эффекты.
-   Используйте **Cinemachine Confiner**, чтобы камера не выходила за границы уровня.
-   Добавьте частицы при сборе монет для визуальной обратной связи.

Готовый проект можно расширить: добавить больше уровней, улучшить ИИ босса или внедрить систему достижений! 🕹️
